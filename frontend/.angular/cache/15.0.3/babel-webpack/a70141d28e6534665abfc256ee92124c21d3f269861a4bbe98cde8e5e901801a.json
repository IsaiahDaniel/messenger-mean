{"ast":null,"code":"import { EventEmitter } from '@angular/core';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/http.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/material/expansion\";\nimport * as i4 from \"@angular/material/button\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"@angular/material/progress-spinner\";\nfunction PostsListComponent_div_0_mat_spinner_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"mat-spinner\");\n  }\n}\nfunction PostsListComponent_div_0_mat_expansion_panel_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"mat-expansion-panel\", 5);\n    i0.ɵɵlistener(\"opened\", function PostsListComponent_div_0_mat_expansion_panel_3_Template_mat_expansion_panel_opened_0_listener() {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r5 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r5.panelOpenState = true);\n    })(\"closed\", function PostsListComponent_div_0_mat_expansion_panel_3_Template_mat_expansion_panel_closed_0_listener() {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r7 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r7.panelOpenState = false);\n    });\n    i0.ɵɵelementStart(1, \"mat-expansion-panel-header\")(2, \"mat-panel-title\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(4, \"p\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"mat-action-row\")(7, \"button\", 6);\n    i0.ɵɵlistener(\"click\", function PostsListComponent_div_0_mat_expansion_panel_3_Template_button_click_7_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r6);\n      const post_r4 = restoredCtx.$implicit;\n      const ctx_r8 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r8.deletePost(post_r4 == null ? null : post_r4._id));\n    });\n    i0.ɵɵtext(8, \"Delete\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"button\", 7);\n    i0.ɵɵlistener(\"click\", function PostsListComponent_div_0_mat_expansion_panel_3_Template_button_click_9_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r6);\n      const post_r4 = restoredCtx.$implicit;\n      const ctx_r9 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r9.editPost(post_r4 == null ? null : post_r4._id));\n    });\n    i0.ɵɵtext(10, \"Edit\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const post_r4 = ctx.$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(post_r4.title);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(post_r4.content);\n  }\n}\nfunction PostsListComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 1);\n    i0.ɵɵtemplate(1, PostsListComponent_div_0_mat_spinner_1_Template, 1, 0, \"mat-spinner\", 3);\n    i0.ɵɵelementStart(2, \"mat-accordion\");\n    i0.ɵɵtemplate(3, PostsListComponent_div_0_mat_expansion_panel_3_Template, 11, 2, \"mat-expansion-panel\", 4);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngI\", ctx_r0.isLoading);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.posts);\n  }\n}\nfunction PostsListComponent_p_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 8);\n    i0.ɵɵtext(1, \"No Posts yet\");\n    i0.ɵɵelementEnd();\n  }\n}\nexport class PostsListComponent {\n  constructor(http, router) {\n    this.http = http;\n    this.router = router;\n    this.panelOpenState = false;\n    this.posts = [];\n    this.postDeleted = new EventEmitter();\n    this.isLoading = true;\n  }\n  ngOnInit() {\n    this.getPosts();\n  }\n  getPosts() {\n    this.isLoading = true;\n    this.http.get(\"posts\", data => {\n      if (data.success) {\n        this.posts = data.data;\n        this.isLoading = false;\n      }\n    });\n  }\n  deletePost(id) {\n    this.http.delete(`posts/${id}`, data => {\n      if (data.success) {\n        this.getPosts();\n      }\n    });\n  }\n  editPost(post) {\n    console.log(\"test\");\n    this.router.navigateByUrl(`/edit/${post}`);\n  }\n}\nPostsListComponent.ɵfac = function PostsListComponent_Factory(t) {\n  return new (t || PostsListComponent)(i0.ɵɵdirectiveInject(i1.HttpService), i0.ɵɵdirectiveInject(i2.Router));\n};\nPostsListComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: PostsListComponent,\n  selectors: [[\"app-posts-list\"]],\n  outputs: {\n    postDeleted: \"postDeleted\"\n  },\n  decls: 3,\n  vars: 2,\n  consts: [[\"class\", \"container\", 4, \"ngIf\"], [1, \"container\"], [\"class\", \"text-center\", 4, \"ngIf\"], [4, \"ngI\"], [3, \"opened\", \"closed\", 4, \"ngFor\", \"ngForOf\"], [3, \"opened\", \"closed\"], [\"mat-button\", \"\", \"color\", \"accent\", 3, \"click\"], [\"mat-button\", \"\", \"color\", \"primary\", 3, \"click\"], [1, \"text-center\"]],\n  template: function PostsListComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtemplate(0, PostsListComponent_div_0_Template, 4, 2, \"div\", 0);\n      i0.ɵɵelementStart(1, \"div\", 1);\n      i0.ɵɵtemplate(2, PostsListComponent_p_2_Template, 2, 0, \"p\", 2);\n      i0.ɵɵelementEnd();\n    }\n    if (rf & 2) {\n      i0.ɵɵproperty(\"ngIf\", ctx.posts.length);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", !ctx.posts.length);\n    }\n  },\n  dependencies: [i3.MatAccordion, i3.MatExpansionPanel, i3.MatExpansionPanelActionRow, i3.MatExpansionPanelHeader, i3.MatExpansionPanelTitle, i4.MatButton, i5.NgForOf, i5.NgIf, i6.MatProgressSpinner],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"AAAA,SAAoBA,YAAY,QAA+B,eAAe;;;;;;;;;;ICC5EC,8BAA4C;;;;;;IAE1CA,8CAIC;IAHCA;MAAAA;MAAA;MAAA,8CAA2B,IAAI;IAAA,EAAC;MAAAA;MAAA;MAAA,8CACL,KAAK;IAAA,EADA;IAIhCA,kDAA4B;IACTA,YAAgB;IAAAA,iBAAkB;IAGrDA,yBAAG;IAAAA,YAAkB;IAAAA,iBAAI;IACzBA,sCAAgB;IACoBA;MAAA;MAAA;MAAA;MAAA,OAASA,sEAAqB;IAAA,EAAC;IAACA,sBAAM;IAAAA,iBAAS;IACjFA,iCAAiE;IAA9BA;MAAA;MAAA;MAAA;MAAA,OAASA,oEAAmB;IAAA,EAAC;IAACA,qBAAI;IAAAA,iBAAS;;;;IAN7DA,eAAgB;IAAhBA,mCAAgB;IAGhCA,eAAkB;IAAlBA,qCAAkB;;;;;IAZ3BA,8BAA4C;IAC1CA,yFAA4C;IAC5CA,qCAAe;IACbA,0GAcsB;IACxBA,iBAAgB;;;;IAjBFA,eAAc;IAAdA,sCAAc;IAKPA,eAAQ;IAARA,sCAAQ;;;;;IAgB7BA,4BAA6C;IAAAA,4BAAY;IAAAA,iBAAI;;;ADZ/D,OAAM,MAAOC,kBAAkB;EAO7BC,YAAoBC,IAAiB,EAAUC,MAAc;IAAzC,SAAI,GAAJD,IAAI;IAAuB,WAAM,GAANC,MAAM;IANrD,mBAAc,GAAG,KAAK;IAEtB,UAAK,GAAW,EAAE;IACR,gBAAW,GAAG,IAAIL,YAAY,EAAE;IAC1C,cAAS,GAAG,IAAI;EAE+C;EAE/DM,QAAQ;IACN,IAAI,CAACC,QAAQ,EAAE;EACjB;EAEAA,QAAQ;IACN,IAAI,CAACC,SAAS,GAAG,IAAI;IACrB,IAAI,CAACJ,IAAI,CAACK,GAAG,CAAC,OAAO,EAAGC,IAAS,IAAI;MACnC,IAAGA,IAAI,CAACC,OAAO,EAAC;QACd,IAAI,CAACC,KAAK,GAAGF,IAAI,CAACA,IAAI;QACtB,IAAI,CAACF,SAAS,GAAG,KAAK;;IAE1B,CAAC,CAAC;EACJ;EAEAK,UAAU,CAACC,EAAO;IAChB,IAAI,CAACV,IAAI,CAACW,MAAM,CAAC,SAASD,EAAE,EAAE,EAAGJ,IAAS,IAAI;MAC5C,IAAGA,IAAI,CAACC,OAAO,EAAC;QACd,IAAI,CAACJ,QAAQ,EAAE;;IAEnB,CAAC,CAAC;EACJ;EAEAS,QAAQ,CAACC,IAAS;IAChBC,OAAO,CAACC,GAAG,CAAC,MAAM,CAAC;IACnB,IAAI,CAACd,MAAM,CAACe,aAAa,CAAC,SAASH,IAAI,EAAE,CAAC;EAC5C;;AAlCWf,kBAAkB;mBAAlBA,kBAAkB;AAAA;AAAlBA,kBAAkB;QAAlBA,kBAAkB;EAAAmB;EAAAC;IAAAC;EAAA;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;MCV/B1B,mEAmBM;MAENA,8BAAuB;MACrBA,+DAA6D;MAC/DA,iBAAM;;;MAvBkBA,uCAAkB;MAsBpCA,eAAmB;MAAnBA,wCAAmB","names":["EventEmitter","i0","PostsListComponent","constructor","http","router","ngOnInit","getPosts","isLoading","get","data","success","posts","deletePost","id","delete","editPost","post","console","log","navigateByUrl","selectors","outputs","postDeleted","decls","vars","consts","template"],"sourceRoot":"","sources":["/Users/mac/Documents/messages-social/frontend/src/app/components/posts-list/posts-list.component.ts","/Users/mac/Documents/messages-social/frontend/src/app/components/posts-list/posts-list.component.html"],"sourcesContent":["import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { Post } from 'src/app/interfaces/posts.model';\nimport { HttpService } from 'src/app/services/http.service';\n\n@Component({\n  selector: 'app-posts-list',\n  templateUrl: './posts-list.component.html',\n  styleUrls: ['./posts-list.component.scss']\n})\nexport class PostsListComponent implements OnInit {\n  panelOpenState = false;\n\n  posts: Post[] = [];\n  @Output() postDeleted = new EventEmitter();\n  isLoading = true;\n\n  constructor(private http: HttpService, private router: Router){}\n\n  ngOnInit(): void {\n    this.getPosts();  \n  }\n\n  getPosts(){\n    this.isLoading = true;\n    this.http.get(\"posts\", (data: any) => {\n      if(data.success){\n        this.posts = data.data;\n        this.isLoading = false;\n      }\n    })\n  }\n\n  deletePost(id: any){\n    this.http.delete(`posts/${id}`, (data: any) => {\n      if(data.success){\n        this.getPosts();\n      }\n    })\n  }\n\n  editPost(post: any){\n    console.log(\"test\")\n    this.router.navigateByUrl(`/edit/${post}`)\n  }\n\n}\n","<div class=\"container\" *ngIf=\"posts.length\">\n  <mat-spinner *ngI=\"isLoading\"></mat-spinner>\n  <mat-accordion>\n    <mat-expansion-panel\n      (opened)=\"panelOpenState = true\"\n      (closed)=\"panelOpenState = false\"\n      *ngFor=\"let post of posts\"\n    >\n      <mat-expansion-panel-header>\n        <mat-panel-title>{{ post.title }}</mat-panel-title>\n        <!-- <mat-panel-description> Post Description </mat-panel-description> -->\n      </mat-expansion-panel-header>\n      <p>{{ post.content }}</p>\n      <mat-action-row>\n        <button mat-button color=\"accent\" (click)=\"deletePost(post?._id)\">Delete</button>\n        <button mat-button color=\"primary\" (click)=\"editPost(post?._id)\">Edit</button>\n      </mat-action-row>\n    </mat-expansion-panel>\n  </mat-accordion>\n</div>\n\n<div class=\"container\">\n  <p *ngIf=\"!posts.length\" class=\"text-center\">No Posts yet</p>\n</div>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}