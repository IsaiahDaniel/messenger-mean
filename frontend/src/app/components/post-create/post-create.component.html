<section class="container">
  <mat-card>
    <!-- (submit)="onCreatePost()" -->
    <mat-card-content>
      <form [formGroup]="form">
        <mat-form-field>
          <input
            type="text"
            placeholder="Post title"
            matInput
            name="title"
            formControlName="title"
            />
          <mat-error *ngIf="form.get('title')">Post Title is required</mat-error>
        </mat-form-field>

        <br>

        <div>
          <button mat-stroked-button (click)="filePicker.click()">Pick Image</button>
          <input type="file" (change)="onImageSelected($event)" #filePicker>
        </div>

        <div *ngIf="imagePreview">
          <img [src]="imagePreview" name="image" formControlName="image" alt="">
        </div>

        <br>

        <mat-form-field>
          <textarea
            placeholder="Post content"
            id="content"
            cols="30"
            rows="10"
            name="content"
            matInput
            formControlName="content"
            ></textarea>
          <mat-error *ngIf="form.get('content')">Content is required</mat-error>
        </mat-form-field>
        
        <br>

        <mat-spinner *ngIf="isLoading"></mat-spinner>

        <br>

        <button type="submit" mat-raised-button color="primary" (click)="onCreatePost()">Save Post</button>
      </form>
    </mat-card-content>
  </mat-card>
</section>

